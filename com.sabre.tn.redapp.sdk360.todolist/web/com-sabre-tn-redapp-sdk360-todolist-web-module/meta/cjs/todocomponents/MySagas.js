"use strict";var __generator=this&&this.__generator||function(e,t){var r,a,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(c){return function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(c){o=[6,c],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(exports,"__esModule",{value:!0});var ReduxActions_1=require("./ReduxActions"),redux_saga_1=require("redux-saga"),backendservice_1=require("../datamodels/backendservice"),takeLatest=redux_saga_1.effects.takeLatest,takeEvery=redux_saga_1.effects.takeEvery,put=redux_saga_1.effects.put,call=redux_saga_1.effects.call,select=redux_saga_1.effects.select;function createTodo(e){var t,r;return __generator(this,function(a){switch(a.label){case 0:return console.log("#####  Saga for Create Dispatch ##### "),t=e.payload.text,[4,backendservice_1.createToDo(t)];case 1:return r=a.sent(),[4,put({type:ReduxActions_1.CREATE_TODO_SUCESS,payload:r})];case 2:return a.sent(),[2]}})}function removeTodo(e){var t,r;return __generator(this,function(a){switch(a.label){case 0:return console.log("#####  Saga for Remove Dispatch ##### "),t=e.payload.text,[4,backendservice_1.removeToDo(t)];case 1:return r=a.sent(),[4,put({type:ReduxActions_1.REMOVE_TODO_SUCESS,payload:r})];case 2:return a.sent(),[2]}})}function loadTodos(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),console.log("### LOAD TODOS SAGA #### "),[4,backendservice_1.getTodoList()];case 1:return e=r.sent(),[4,put({type:ReduxActions_1.LOAD_TODO_SUCESS,payload:e})];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.log("Error in Saga "),console.log(t),[3,4];case 4:return[2]}})}function completeTodo(e){var t,r;return __generator(this,function(a){switch(a.label){case 0:return console.log("#####  Saga for Complete Dispatch ##### "),t=e.payload.text,[4,backendservice_1.completeToDo(t)];case 1:return r=a.sent(),[4,put({type:ReduxActions_1.CREATE_TODO_SUCESS,payload:r})];case 2:return a.sent(),[2]}})}function listenForDispatchSaga(){return __generator(this,function(e){switch(e.label){case 0:return[4,takeLatest(ReduxActions_1.CREATE_TODO,createTodo)];case 1:return e.sent(),[4,takeLatest(ReduxActions_1.REMOVE_TODO,removeTodo)];case 2:return e.sent(),[4,takeLatest(ReduxActions_1.COMPLETE_TODO,completeTodo)];case 3:return e.sent(),[4,takeLatest(ReduxActions_1.LOAD_TODO,loadTodos)];case 4:return e.sent(),[2]}})}exports.listenForDispatchSaga=listenForDispatchSaga;
